Metadata-Version: 2.4
Name: pylrclibup
Version: 0.1.0
Summary: A robust Python CLI tool for uploading lyrics or instrumental tags to LRCLIB.
Author-email: Harmonese <soundwaveradiator@gmail.com>
License-Expression: MIT
Project-URL: Homepage, https://github.com/Harmonese/pylrclibup
Project-URL: Source, https://github.com/Harmonese/pylrclibup
Project-URL: Issues, https://github.com/Harmonese/pylrclibup/issues
Keywords: lrclib,lyrics,lrc,music,metadata
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: requests>=2.31.0
Requires-Dist: mutagen>=1.47
Dynamic: license-file

# pylrclibup  
ä¸€ä¸ªç”¨äºå°†æœ¬åœ° MP3/LRC æ­Œæ›²æ‰¹é‡ä¸Šä¼ åˆ° **LRCLIB.net** çš„å…¨è‡ªåŠ¨å¢å¼ºå·¥å…·ã€‚  
æ¯”å®˜æ–¹å·¥å…·æ›´å¼ºã€æ›´ç¨³å®šã€æ›´æ™ºèƒ½â€”â€”è¦†ç›–å…ƒæ•°æ®è§£æã€æ¨¡ç³ŠåŒ¹é…ã€æœ¬åœ°/å¤–éƒ¨æ­Œè¯æ•´åˆã€è„šæœ¬è‡ªåŠ¨åŒ–ã€ç½‘ç»œé‡è¯•ã€ç©ºç›®å½•æ¸…ç†ä¸çº¯éŸ³ä¹è¯†åˆ«ç­‰æ•´å¥—æµç¨‹ã€‚

---

# âœ¨ åŠŸèƒ½äº®ç‚¹

## ğŸµ 1. è‡ªåŠ¨ä» MP3 è¯»å–çœŸå® metadata  
- æ”¯æŒ ID3v2.3 / 2.4  
- è‡ªåŠ¨è¯»å–ï¼š  
  - `title`ï¼ˆæ›²åï¼‰  
  - `artist`ï¼ˆè‰ºäººï¼Œå¤šè‰ºäººè‡ªåŠ¨æ‹†åˆ†ï¼‰  
  - `album`ï¼ˆä¸“è¾‘åï¼‰  
  - `duration`ï¼ˆæ—¶é•¿ï¼‰  
- å®Œå…¨ä¸ä¾èµ–æ–‡ä»¶åï¼Œæé«˜å‡†ç¡®æ€§

## ğŸ” 2. æ™ºèƒ½åŒ¹é…æœ¬åœ° LRCï¼ˆé€’å½’æ‰«æ + å®½æ¾æ¨¡ç³Šè§„åˆ™ï¼‰  
- æå– LRC æ–‡ä»¶åçš„ç»“æ„ï¼š  
  - `Artist - Title.lrc`  
- å¤šè‰ºäººåŒ¹é…ä»…éœ€ **ä¸€ä¸ªè‰ºäººå‘½ä¸­** å³å¯  
- æ›²å normalize åä¸¥æ ¼ä¸€è‡´ï¼ˆé¿å…è¯¯åŒ¹é…ï¼‰  
- è‡ªåŠ¨å¤„ç†ä»¥ä¸‹åˆ†éš”ç¬¦ï¼š  
  - `,` `/` `;` `ã€` `&` `x` `Ã—` `feat.` `featuring`  
- è‹¥åŒ¹é…åˆ°å¤šä¸ª LRC â†’ è‡ªåŠ¨è¿›å…¥é€‰æ‹©æ¨¡å¼

## ğŸ§¹ 3. è‡ªåŠ¨æ¸…æ´— LRC å†…å®¹  
è¯†åˆ«å¹¶ç§»é™¤æ‰€æœ‰å¸¸è§â€œCredit å­—æ®µâ€ï¼ŒåŒ…æ‹¬ï¼š  

- ä½œè¯ / ä½œæ›²  
- ç¼–æ›²  
- å½•éŸ³ / ç¼©æ·· / æ··éŸ³ / æ¯å¸¦  
- åˆ¶ä½œ / ç›‘åˆ¶  
- å’Œå£° / é…å”±  
- ç­‰å…¶ä»– NCMï¼ˆç½‘æ˜“äº‘ï¼‰æ ¼å¼å­—æ®µ  

æ”¯æŒè¯†åˆ« credit çš„å„ç§å˜ä½“ï¼š  
```

[00:00.00] ä½œè¯ : XXX
[00:00.00] ä½œæ›²ï¼šXXX
[00:00.00] æ··éŸ³  : XXX

````

## ğŸ¼ 4. è‡ªåŠ¨è¯†åˆ«çº¯éŸ³ä¹  
- æ£€æµ‹æ–‡æœ¬ï¼š  
  - â€œçº¯éŸ³ä¹ï¼Œè¯·æ¬£èµâ€ç­‰æ‰€æœ‰å¸¸è§è¡¨è¾¾  
- æˆ– LRC å†…å®¹ä¸ºç©º  
- æˆ–ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©  
â†’ è‡ªåŠ¨ä¸Šä¼ ä¸ºç©ºæ­Œè¯ï¼ˆinstrumentalï¼‰

## ğŸŒ 5. æ”¯æŒ /api/get-cached ä¸ /api/get åŒæŸ¥è¯¢  
- **get-cached** â†’ æŸ¥è¯¢å†…éƒ¨æ•°æ®åº“ï¼ˆ0 å¤–éƒ¨è¯·æ±‚ï¼‰  
- **get** â†’ è‹¥æ²¡æœ‰å†…éƒ¨ç»“æœï¼Œä¼šè§¦å‘å¤–éƒ¨æŠ“å–  
- åŒæŸ¥è¯¢å¯ä»¥åˆ¤æ–­ï¼š  
  - è¿™é¦–æ­Œæ˜¯å¦å·²ç»æœ‰äººä¸Šä¼   
  - å¤–éƒ¨æŠ“å–å¾—åˆ°çš„ç‰ˆæœ¬æ˜¯å¦å€¼å¾—ä¼˜å…ˆä½¿ç”¨

## ğŸš€ 6. å®Œæ•´çš„ä¸Šä¼ æµç¨‹ï¼ˆPoW è‡ªå®ç°ï¼‰  
- **è‡ªå®šä¹‰ PoW æ±‚è§£å™¨**ï¼ˆå®Œå…¨æ— å¤–éƒ¨ä¾èµ–ï¼‰  
- è‡ªåŠ¨è·å– challenge â†’ nonce â†’ publish token  
- æœ€å¤§åŒ–é™ä½ç½‘ç»œå¤±è´¥çš„å½±å“

## ğŸ” 7. æ™ºèƒ½é‡è¯•æœºåˆ¶  
å¯¹ç½‘ç»œä¸ç¨³å®šç¯å¢ƒç‰¹åˆ«ä¼˜åŒ–ï¼š  
- `/api/get` / `/api/get-cached`  
- `/api/request-challenge`  
- `/api/publish`  
å‡è‡ªåŠ¨é‡è¯•ï¼Œæœ€å¤§ 5 æ¬¡

## ğŸ“¦ 8. è‡ªåŠ¨æ–‡ä»¶è¿ç§» + æ¸…ç†ç©ºç›®å½•  
ä¸Šä¼ æˆåŠŸæˆ–å‘ç°å·²æœ‰æ­Œè¯åï¼š  
- MP3 â†’ moved åˆ° `done-tracks/`  
- LRC â†’ moved åˆ° `done-lrc-files/`  
- å¹¶è‡ªåŠ¨é€’å½’åˆ é™¤ç©ºç›®å½•ï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰

## ğŸ–± 9. CLI å‹å¥½äº¤äº’  
- å•é¦–æ–‡ä»¶ä¸Šä¼   
- æ‰€æœ‰æ“ä½œå¯äº¤äº’å¼ç¡®è®¤  
- `--yes` æ¨¡å¼å…¨è‡ªåŠ¨  
- `--dry-run` ä¸ä¸Šä¼ ï¼Œä¸ç§»åŠ¨ï¼Œå…¨é¢é¢„è§ˆ  
- Ctrl+C **ä¼˜é›…é€€å‡ºï¼ˆæ—  tracebackï¼‰**

## ğŸŒ 10. å®Œå…¨æ”¯æŒç»å¯¹è·¯å¾„ & ç›¸å¯¹è·¯å¾„  
æ‰€æœ‰è·¯å¾„éƒ½å¯ä»¥ï¼š  
- ä½¿ç”¨ç»å¯¹è·¯å¾„  
- æˆ–ç›¸å¯¹ root çš„è·¯å¾„  
- æˆ–å®Œå…¨ä¾èµ–é»˜è®¤ç»“æ„

---

# ğŸ“¥ å®‰è£…

## PyPI ç‰ˆæœ¬ï¼ˆå‘å¸ƒåä½¿ç”¨ï¼‰
```bash
pip install pylrclibup
````

## æœ¬åœ°å¼€å‘æ¨¡å¼

```bash
pip install -e .
```

---

# ğŸ§­ ä½¿ç”¨ç¤ºä¾‹

## 1. æœ€å¿«å…¥é—¨ï¼ˆä½¿ç”¨é»˜è®¤ç›®å½•ï¼‰

```bash
pylrclibup
```

ç›®å½•ç»“æ„ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰ï¼š

```
./tracks/
./lrc-files/
./done-tracks/
./done-lrc-files/
```

---

## 2. ä½¿ç”¨è‡ªå®šä¹‰æ ¹ç›®å½•

```bash
pylrclibup --root /my/env
```

æœ€ç»ˆè·¯å¾„è‡ªåŠ¨å˜ä¸ºï¼š

```
/my/env/tracks
/my/env/lrc-files
/my/env/done-tracks
/my/env/done-lrc-files
```

---

## 3. ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼ˆå¿½ç•¥ rootï¼‰

```bash
pylrclibup \
  --tracks "/mnt/music/tracks" \
  --lrc "/mnt/music/lrc" \
  --done-tracks "/mnt/music/ok_tracks" \
  --done-lrc "/mnt/music/ok_lrc"
```

---

## 4. å•é¦–å¤„ç†

```bash
pylrclibup --single "Lost & Found.mp3"
```

---

## 5. dry-run

```bash
pylrclibup --dry-run
```

---

## 6. å…¨è‡ªåŠ¨ä¸Šä¼ ï¼ˆæ— ä»»ä½•è¯¢é—®ï¼‰

```bash
pylrclibup --yes
```

---

# âš™ ç¯å¢ƒå˜é‡æ”¯æŒ

æ‰€æœ‰ CLI å‚æ•°ï¼Œéƒ½å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œæ§åˆ¶ï¼Œä»¥æ»¡è¶³è‡ªåŠ¨åŒ–éƒ¨ç½²åœºæ™¯ã€‚

ç¤ºä¾‹ï¼š

```bash
export PYLRCLIBUP_ROOT=/data/lrcenv
export PYLRCLIBUP_TRACKS=/data/mp3
export PYLRCLIBUP_LRC=/data/lrc
export PYLRCLIBUP_DONE_TRACKS=/data/handled_mp3
export PYLRCLIBUP_DONE_LRC=/data/handled_lrc
export PYLRCLIBUP_PREVIEW_LINES=8

pylrclibup
```

ä¼˜å…ˆçº§ï¼š

1. CLI å‚æ•° >
2. ç¯å¢ƒå˜é‡ >
3. é»˜è®¤é…ç½®

